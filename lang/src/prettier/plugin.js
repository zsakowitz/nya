import{builders as go}from"prettier/doc.js";var Cr={if:14,else:15,for:16,match:17,rule:18,expose:19,type:20,fn:21,struct:22,opaque:23,let:24,in:25,enum:26,return:27,break:28,continue:29,use:30,usage:31,as:32,only:33,source:34,data:35,ref:36,assert:37,raise:38,const:39,true:40,false:41,local:0};var W={"+":81,"-":82,"*":84,"/":85,"**":86,"~":87,"|":88,"&":89,"||":90,"&&":91,"@":92,"\\":93,"==":94,"!=":95,"<=":96,">=":97,"<":98,">":99,"!":100,"(":101,")":102,"[":103,"]":104,"{":105,"}":106,"$(":109,";":110,",":111,":":112,"->":113,"=>":114,"::":115,".":116,"..":117,"%":118,"=":119},Nt={101:102,103:104,105:106,107:108,109:102},le=Object.create(null);for(let e in W)switch(e.length){case 1:le[e]??=[];break;case 2:(le[e[0]]??=[]).push(e[1]);break}var En={":":10,"@":4,"'":5,$:7},Rr=Object.freeze([81,82,84,85,86,87,88,89,90,91,93,94,95,96,97,98,99,100,113,118]),Tn={81:"+",42:"@+",82:"-",83:"-",43:"@-",44:"@-",84:"*",45:"@*",85:"/",46:"@/",86:"**",47:"@**",87:"~",48:"@~",88:"|",49:"@|",89:"&",50:"@&",90:"||",51:"@||",91:"&&",52:"@&&",92:"@",53:"@@",93:"\\",54:"@\\",94:"==",55:"@==",95:"!=",56:"@!=",96:"<=",57:"@<=",97:">=",58:"@>=",98:"<",59:"@<",99:">",60:"@>",100:"!",61:"@!",101:"(",62:"@(",102:")",63:"@)",103:"[",64:"@[",104:"]",65:"@]",105:"{",66:"@{",106:"}",67:"@}",109:"$(",70:"@$(",110:";",71:"@;",111:",",72:"@,",112:":",73:"@:",113:"->",74:"@->",114:"=>",75:"@=>",115:"::",76:"@::",116:".",77:"@.",117:"..",78:"@..",118:"%",79:"@%",119:"=",80:"@=",14:"if",15:"else",16:"for",17:"match",18:"rule",19:"expose",20:"type",21:"fn",22:"struct",23:"opaque",24:"let",25:"in",26:"enum",27:"return",28:"break",29:"continue",30:"use",31:"usage",32:"as",33:"only",34:"source",35:"data",36:"ref",37:"assert",38:"raise",39:"const",40:"true",41:"false",0:"local"};var l=Object.freeze({LetterDirectlyAfterNumber:19,InvalidBuiltinName:20,UnknownChar:21,FloatMustEndInDigit:22,UnterminatedString:23,UnknownOperator:24,UnterminatedSource:25,UnterminatedStringIdent:26,MismatchedClosingParen:28,MismatchedOpeningParen:29,ExpectedIdent:30,ExpectedExpression:31,UnexpectedToken:32,IfOrBlockMustFollowElse:33,ExpectedType:34,MissingSemi:35,MissingRuleArrow:36,ExpectedBlock:37,ExpectedForBindings:38,ExpectedForSources:39,ExpectedIn:40,UnnecessarySemi:41,ExpectedColon:42,ExpectedFnParams:43,ExpectedFnName:44,InvalidLabeledExit:45,InvalidValuedExit:46,ExpectedPat:47,ExpectedMatchArrow:48,ExpectedMatchArms:49,ExpectedImportPath:50,ExpectedStructFields:51,ExpectedEnumVariants:52,ExpectedEnumVariantValue:53,ExpectedCommaOrSemi:54,InvalidExposeKind:55,NoGenericsOnExposedFn:56,ExpectedExposeString:57,InvalidLabel:58,OnlyValidAsExposedAlias:59,ExpectedAssertFailureReason:60,ExpectedConstWrtList:61,VarParamFollowedByArguments:62,NonParamFollowedByConstMarker:63,NonParamFollowedByTypeAssertion:64,ExpectedUsageExamples:65,ExpectedDestructuring:66,UseDotAsAStructNameForDestructuringInPatterns:67,IntTooLarge:70,AssertionsMustResultInBool:71}),E=class{constructor(t,n){this.start=t;this.end=n}},Sn=class{constructor(t,n){this.code=t;this.pos=n}},Jt=class{constructor(){this.entries=[]}raise(t,n){this.entries.push(new Sn(t,n))}ok(){return this.entries.length==0}};var u=class extends E{};var j=class extends u{constructor(n,r){super(n.start,(r??n).end);this.colon=n;this.type=r}},we=class extends u{constructor(n,r){super(n.start,(r??n).end);this.name=n;this.type=r}},ge=class extends u{constructor(n){super(n.start,n.end);this.list=n}},X=class extends u{constructor(n,r,o){super(r,o);this.items=n}},L=class extends u{constructor(n,r,o,a,s){super(n.start,n.end);this.bracket=n;this.items=r;this.terminator=o;this.commas=a;this.block=s}},Be=class extends u{constructor(n,r,o){super(n.start,(o??r??n).end);this.name=n;this.colon=r;this.expr=o}},Ke=class extends u{constructor(n,r){super(n.start,(r??n).end);this.label=n;this.colon=r}},Le=class extends u{constructor(n,r,o){super(n.start,o.end);this.pat=n;this.arrow=r;this.expr=o}},Ie=class extends u{constructor(n,r){super(n.start,(r??n).end);this.dot=n;this.name=r}},Pe=class extends u{constructor(n,r,o){super(n.start,o.end);this.ident=n;this.colon=r;this.type=o}},De=class extends u{constructor(n,r,o,a){super((n??r??o??a).start,a.end);this.constKw=n;this.name=r;this.colon=o;this.type=a}},Ce=class extends u{constructor(n,r){super(n.start,(r??n).end);this.name=n;this.fields=r}},Re=class extends u{constructor(n,r,o){super(n.start,o.end);this.name=n;this.arrow=r;this.of=o}},Ne=class extends u{constructor(n,r){super(n.start,(r??n).end);this.as=n;this.alias=r}},Fe=class extends u{constructor(n,r,o){super(r,o);this.items=n}},Me=class extends u{constructor(n,r){super(n.start,(r??n).end);this.bang=n;this.names=r}},pe=class extends u{constructor(n,r,o){super(n.start,(r??n).end);this.dcolon=n;this.type=r;this.spaced=o}},Ue=class extends u{constructor(n,r,o,a){super(n.start,(a??o).end);this.lhs=n;this.arrow=r;this.rhs=o;this.semi=a}},ve=class extends u{constructor(n,r){super(n.start,(r??n).end);this.arrow=n;this.retType=r}},Ge=class extends u{constructor(n,r){super(n.start,(r??n).end);this.kw=n;this.usages=r}},ue=class extends u{constructor(n,r){super(n.start,(r??n).end);this.kw=n;this.block=r}},Z=class extends u{constructor(n,r){super(n.start,r.end);this.brack=n;this.value=r}},Ve=class extends u{constructor(n,r){super(n.start,(r??n).end);this.key=n;this.pat=r}},qe=class extends u{constructor(n,r){super(n.start,r.end);this.colon=n;this.pat=r}},_e=class extends u{constructor(n,r){super(n.start,(r??n).end);this.eq=n;this.value=r}},ie=class extends u{constructor(n,r){super(n.start,(r??n).end);this.kw=n;this.message=r}};var i=class extends E{constructor(n,r,o,a,s=!1){super(o,a);this.source=n;this.kind=r;this.virtual=s}get val(){return this.kind in Tn?Tn[this.kind]:this.source.slice(this.start,this.end)}},wn=/[A-Za-z_]/,gn=/[A-Za-z0-9_]/,ko=/\s/,Oo=/[@%:'A-Za-z_]/,Ao=/[0-9]/,ho=/^(?:0x[\da-f]+(?:\.[\da-f]+)?(?:p[+-]?\d+)?|\d+(?:\.\d+)?(?:e[+-]?\d+)?)/i,Bn=/\$\((?:([A-Za-z_]\w*)(?:(\.)(?:([A-Za-z_]\w*))?)?)?\)/g;function be(e,t){return t!=null&&e.test(t)}function Nr(e,t){let n=[],r=new Jt;for(let o=0;o<e.length;){let a=o,s=e[o];if(ko.test(s)){o++;continue}if(s=="d"&&e[o+1]=="/"&&e[o+2]=="d"&&be(wn,e[o+3])){for(o+=2;be(gn,e[++o]););let c=e.slice(a,o);n.push(new i(e,c=="d/d_"?3:2,a,o));continue}if(wn.test(s)){for(;be(gn,e[++o]););let c=e.slice(a,o);n.push(new i(e,Cr[c]??(c=="_"?6:1),a,o));continue}if(s=="%"&&e[o+1]=='"'){o++;let c=!1;for(;o<e.length;){if(o++,e[o]=='"'){o++,c=!0;break}e[o]=="\\"&&o++}n.push(new i(e,1,a,o)),c||r.raise(l.UnterminatedStringIdent,new E(a,o));continue}if(s=="@"&&e[o+1]&&e[o+1]in le){o++;let c=e[o],p=e[o+1];if(p&&le[c].includes(p)){n.push(new i(e,W[c+p],a,o+2)),o+=2;continue}o++,c in W?n.push(new i(e,W[c],a,o)):r.raise(l.UnknownOperator,new E(a,o));continue}if(s in En&&be(wn,e[o+1])){for(;be(gn,e[++o]););n.push(new i(e,En[s],a,o));continue}if(Ao.test(s)){let c=e.slice(o).match(ho)[0];o+=c.length,/[.ep]/.test(c)?n.push(new i(e,9,a,o)):n.push(new i(e,8,a,o)),be(Oo,e[o])&&r.raise(l.LetterDirectlyAfterNumber,new E(o,o+1));continue}if(s=="/"&&e[o+1]=="/"){for(o++;e[++o]!=`
`;);t.comments&&n.push(new i(e,12,a,o));continue}if(s=='"'){let c=!1;for(;o<e.length;){if(o++,e[o]=='"'){o++,c=!0;break}e[o]=="\\"&&o++}n.push(new i(e,11,a,o)),c||r.raise(l.UnterminatedString,new E(a,o));continue}if(s=="{"){let c=n[n.length-1],p=n[n.length-2];if(c?.kind==34||c?.kind==1&&p?.kind==34||c?.kind==1&&p?.kind==30){let x=0;e:for(;;)switch(e[++o]){case void 0:o++,n.push(new i(e,13,a,o)),r.raise(l.UnterminatedSource,new E(a,o));break e;case"{":x++;break;case"}":if(x==0){o++,n.push(new i(e,105,a,a+1));let h=a+1,g=e.slice(h,o-1),B;Bn.lastIndex=0;let Ct=0;for(;B=Bn.exec(g);){let G=h+B.index;n.push(new i(e,13,h+Ct,G));let Dr=h+(Ct=Bn.lastIndex);if(n.push(new i(e,109,G,G+2)),B[1]){let Rt=B[1].length;if(n.push(new i(e,1,G+2,G+2+Rt)),B[2]){let hn=B[2].length;if(n.push(new i(e,116,G+2+Rt,G+2+Rt+hn)),B[3]){let xo=B[3].length;n.push(new i(e,1,G+2+Rt+hn,G+2+Rt+hn+xo))}}}n.push(new i(e,102,Dr-1,Dr))}n.push(new i(e,13,h+Ct,o-1)),n.push(new i(e,106,o-1,o));break e}else{x--;break}}}else n.push(new i(e,105,a,++o));continue}if(s in le){let c=e[o+1];if(c&&le[s].includes(c)){n.push(new i(e,W[s+c],a,o+2)),o+=2;continue}o++,s in W?n.push(new i(e,W[s],a,o)):r.raise(l.UnknownOperator,new E(a,o));continue}r.raise(l.UnknownChar,new E(a,++o))}return{ret:n,issues:r}}import{builders as To}from"prettier/doc.js";var vt=class extends u{},We=class extends vt{constructor(n,r,o,a,s){super(n.start,(s??a??o??r??n).end);this.kw=n;this.name=r;this.label=o;this.as=a;this.semi=s}},je=class extends vt{constructor(n,r,o,a,s,c){super(n.start,(c??a??s??o??r??n).end);this.kw=n;this.name=r;this.targs=o;this.as=a;this.label=s;this.semi=c}},Xe=class extends vt{constructor(n,r,o,a,s,c,p,x){super(n.start,(x??o??s??a??r??n).end);this.kw=n;this.name=r;this.as=o;this.label=a;this.type=s;this.eq=c;this.value=p;this.semi=x}};var Eo=0n,en=class{constructor(){this.map=new Map}get(t){let n=this.map.get(t);if(n!==void 0)return n;let r=Ze();return this.map.set(t,r),r}};function Ze(){return++Eo}function Fr(e,t){return Array.isArray(e)&&!(Array.isArray(t)&&e.length===t.length)?!1:e===t}var ba=new en;var He=class{constructor(t,n){this.id=t;this.emit=n}toString(){throw new Error("Cannot stringify a type.")}},Je=class{constructor(t,n){this.raw=t;this.args=n}toString(){throw new Error("Cannot stringify a type.")}is(t){return this.raw.id===t.raw.id&&this.args.length===t.args.length&&this.args.every((n,r)=>Fr(n.value,t.args[r].value))}},ja=new Je(new He(Ze(),e=>{if(typeof e=="string")return`(${e})`;if(typeof e=="number")return`(${e})`;throw new Error("Value of type 'uint' was stored incorrectly.")}),[]),Xa=new Je(new He(Ze(),e=>{if(typeof e=="string")return`(${e})`;if(typeof e=="number")return`(${e.toExponential()})`;throw new Error("Value of type 'real' was stored incorrectly.")}),[]),In=new Je(new He(Ze(),e=>{if(typeof e=="string")return`(${e})`;if(typeof e=="boolean")return`(${e})`;throw new Error("Value of type 'bool' was stored incorrectly.")}),[]),Za=new Je(new He(Ze(),e=>{if(typeof e=="string")return`(${e})`;if(typeof e=="number")return`(${e})`;throw new Error("Value of type 'sym' was stored incorrectly.")}),[]);var f=class extends u{emit(t,n,r){throw new Error(`Cannot emit '${this.constructor.name}' yet.`)}},Ye=class extends f{constructor(n){super(n.start,n.end);this.value=n}},Qe=class extends f{constructor(n,r,o){super(n.start,(o??r??n).end);this.name=n;this.without=r;this.type=o}},et=class extends f{constructor(n,r,o){super(n.start,(o??r??n).end);this.name=n;this.targs=r;this.args=o}},Y=class extends f{constructor(n,r){super(n.start,(r??n).end);this.name=n;this.args=r}},de=class extends f{constructor(n,r){super(n.start,(r??n).end);this.name=n;this.args=r}},V=class extends f{constructor(n){super(n,n);this.at=n}},N=class extends f{constructor(n,r,o,a){super(n.start,(a??o??r).end);this.kw=n;this.condition=r;this.block=o;this.rest=a}},fe=class extends f{constructor(n,r,o,a,s,c){super((n??r).start,(c??s).end);this.label=n;this.kw=r;this.bound=o;this.eq=a;this.sources=s;this.block=c}},tt=class extends f{constructor(n,r,o){super(n.start,(o??r??n).end);this.kw=n;this.label=r;this.value=o}},xe=class extends f{constructor(n,r,o){super(n.start,(o??n).end);this.kw=n;this.on=r;this.arms=o}},q=class extends f{constructor(n){super(n.start,n.end);this.of=n}},Q=class extends f{constructor(n){super(n.start,n.end);this.of=n}},nt=class extends f{constructor(n,r,o,a){super(n.start,a.end);this.brack=n;this.of=r;this.semi=o;this.sizes=a}},ee=class extends f{constructor(n,r,o){super(n.start,(o??r??n).end);this.on=n;this.targs=r;this.args=o}},me=class extends f{constructor(n,r,o,a){super(n.start,(a??o??r).end);this.on=n;this.prop=r;this.targs=o;this.args=a}},ke=class extends f{constructor(n,r){super(n.start,r.end);this.on=n;this.index=r}},te=class extends f{constructor(n,r){super(n.start,r.end);this.op=n;this.of=r}},rt=class extends f{constructor(n,r){super(n.start,n.end);this.wrt=n;this.of=r}},U=class extends f{constructor(n,r,o){super(n.start,o.end);this.lhs=n;this.op=r;this.rhs=o}},_=class extends f{constructor(n,r,o){super((n??r).start,(o??r).end);this.lhs=n;this.op=r;this.rhs=o}},ot=class extends f{constructor(n,r,o){super(n.start,o.end);this.lhs=n;this.op=r;this.rhs=o}},ne=class extends f{constructor(n,r){super((n??r).start,r.end);this.label=n;this.of=r}},at=class extends f{constructor(n,r,o,a,s){super(n.start,(o??r??n).end);this.kw=n;this.lang=r;this.braces=o;this.parts=a;this.interps=s}},st=class extends f{constructor(n,r,o,a,s){super(n,r);this.parts=o;this.cast=a;this.block=s}},ct=class extends f{constructor(n){super(n.start,n.end);this.of=n}};var D=class extends u{emit(t,n){throw new Error(`Cannot emit '${this.constructor.name}' yet.`)}},lt=class extends D{constructor(n,r,o,a){super(n.start,(o??r??n).end);this.kw=n;this.ident=r;this.braces=o;this.source=a}},pt=class extends D{constructor(n,r,o,a,s,c,p){super(n.start,(p??c??s??a??o??r??n).end);this.kw=n;this.name=r;this.tparams=o;this.params=a;this.ret=s;this.usage=c;this.block=p}},ut=class extends D{constructor(n,r,o){super(n.start,(o??r??n).end);this.kw=n;this.tparams=r;this.value=o}},it=class extends D{constructor(n,r,o){super(n.start,(o??r??n).end);this.kw=n;this.source=r;this.semi=o}},yt=class extends D{constructor(n,r,o,a){super(n.start,(a??o??r??n).end);this.kw=n;this.name=r;this.tparams=o;this.variants=a}},dt=class extends D{constructor(n,r,o,a,s,c){super(n.start,(c??s).end);this.kw=n;this.name=r;this.tparams=o;this.arrow=a;this.ret=s;this.variants=c}},ft=class extends D{constructor(n,r,o,a){super(n.start,(a??r??n).end);this.kw=n;this.name=r;this.tparams=o;this.fields=a}},xt=class extends D{constructor(n,r,o,a,s,c){super(n.start,(c??s).end);this.data=n;this.local=r;this.name=o;this.colon=a;this.type=s;this.semi=c}},mt=class extends D{constructor(n,r,o,a){super(n.start,(a??o??r).end);this.kw=n;this.expr=r;this.message=o;this.semi=a}emit(n,r){let o=r.block(),a=n.block(),s=this.expr.emit(a,o,In);s.type.is(In)?r.source+=`if (!(${s})) {
  console.error("test failed: " + ${JSON.stringify(n.source.slice(this.start,this.end))})
}
`:r.issues.raise(l.AssertionsMustResultInBool,this)}},kt=class extends D{constructor(n,r){super(n.start,(r??n).end);this.kw=n;this.item=r}};var Ot=class extends u{},Oe=class extends Ot{constructor(n){super(n.start,n.end);this.name=n}},At=class extends Ot{constructor(n){super(n.start,n.end);this.name=n}},Ae=class extends Ot{constructor(n){super(n.start,n.end);this.name=n}},he=class extends Ot{constructor(n,r){super(n.start,(r??n).end);this.name=n;this.of=r}};var Gt=class extends u{},C=class extends Gt{constructor(n,r,o){super(n.start,r?.end??n.end);this.expr=n;this.semi=r;this.terminatesBlock=o}},ht=class extends Gt{constructor(n,r,o,a,s){super(n.start,(s??a??o??r??n).end);this.kw=n;this.ident=r;this.type=o;this.value=a;this.semi=s}},Et=class extends Gt{constructor(n,r,o,a){super(n.start,(a??o??r).end);this.kw=n;this.expr=r;this.message=o;this.semi=a}};var re=class extends u{},Tt=class extends re{constructor(n,r){super(n.start,(r??n).end);this.name=n;this.targs=r}},St=class extends re{constructor(n){super(n.start,n.end);this.token=n}},tn=class extends re{constructor(n){super(n,n);this.at=n}},wt=class extends re{constructor(n,r){super(n.start,n.end);this.token=n;this.of=r}},gt=class extends re{constructor(n,r,o,a){super(n.start,n.end);this.brack=n;this.of=r;this.semi=o;this.sizes=a}},Bt=class extends re{constructor(n){super(n.start,n.end);this.block=n}};var{fill:So,group:k,softline:w,line:F,ifBreak:M,indent:T,join:Lt,hardline:O,hardlineWithoutBreakParent:qt}=To,Dn=1,Mr=2,Cn=3,Rn=4,I=5,vr=6,Nn=7,Fn=8,Vt=9,Ee=10,Mn=11,rn=12,Un=13,Te=14,nn={[119]:Dn,[80]:Dn,[92]:Mr,[53]:Mr,[90]:Cn,[51]:Cn,[91]:Rn,[52]:Rn,[94]:I,[95]:I,[98]:I,[99]:I,[96]:I,[97]:I,[55]:I,[56]:I,[59]:I,[60]:I,[57]:I,[58]:I,[113]:vr,[88]:Nn,[49]:Nn,[89]:Fn,[50]:Fn,[81]:Vt,[82]:Vt,[42]:Vt,[43]:Vt,[84]:Ee,[85]:Ee,[118]:Ee,[45]:Ee,[46]:Ee,[79]:Ee,[86]:Mn,[47]:Mn,[117]:rn,[93]:Un,[54]:Un,[83]:Te,[44]:Te,[87]:Te,[48]:Te,[100]:Te,[61]:Te};function Kt(e,t,n){if(t==null)return!1;let r=e in nn?nn[e]:null,o=t in nn?nn[t]:null;if(r==null||o==null)return!0;switch(o){case Dn:case Mn:return n?r>o:r>=o;case Cn:case Rn:case vr:case Nn:case Fn:case Vt:case Ee:return n?r>=o:r>o;case I:case rn:case Un:return r>=o;case Te:return!1}return!0}function Pn(e){return oe(e)!=null}function oe(e){return e instanceof q?oe(e.of.value):e instanceof te||e instanceof U?e.op.kind:null}function Ur(e,t){return[t("kw")," ",t.paren("condition",ae(e.condition))," ",M(t.as(e.block?.of,()=>k([t.sub("bracket","lt"),T([qt,Lt(F,t.all("items"))]),qt,t.sub("bracket","gt")])),t.sub("block","of")),t.opt("rest")]}function ae(e){return e instanceof q?ae(e.of.value):e instanceof Y||e instanceof de?!0:e instanceof ke||e instanceof ee||e instanceof me?ae(e.on):e instanceof te?ae(e.of):e instanceof U?ae(e.lhs)||ae(e.rhs):!1}function Gr(e){e instanceof q?Gr(e.of.value):e instanceof N||e instanceof fe?e.block&&(e.block.of.block=!0):e instanceof xe?e.arms&&(e.arms.block=!0):e instanceof ne&&(e.of.block=!0)}var wo=new Set;function on(e,t){switch(e.constructor){case Ye:return e.value.val;case Ge:return[t("kw")," ",t("usages")];case ve:return[t("arrow")," ",t.paren("retType")," "];case pt:return["fn ",t("name"),t.alt("tparams",""),t.alt("params","()")," ",t.alt("ret",""),t.alt("usage",""),t.alt("block","{}")];case ut:return["rule",t.alt("tparams","")," ",t.alt("value",";")];case Ue:return[t("lhs")," ",t.alt("arrow","=>")," ",t("rhs"),t.alt("semi",";")];case Fe:return e.items.map((r,o,a)=>{let s=a[o+1],c=t.source.slice(r.end,s?.start),p=c.indexOf(`
`),x=p!=-1&&c.includes(`
`,p+1);return[t.sub("items",o),s&&x?[O,O]:O]});case ge:return t("list");case X:{let o=e.items.map((a,s)=>a instanceof f&&ae(a)?k(["(",T([w,t.sub("items",s)]),w,")"]):t.sub("items",s));return k([T([w,Lt([",",F],o),M([","],"")]),F])}case L:{let r=e;if(r.items.length==0&&!r.terminator)return r.block?k([t.sub("bracket","lt"),O,t.sub("bracket","gt")]):[t.sub("bracket","lt"),t.sub("bracket","gt")];if(!r.terminator&&r.bracket.kind==105&&!r.commas){if(r.block)return k([t.sub("bracket","lt"),T([O,e.items.map((c,p,x)=>{let A=x[p+1],h=t.source.slice(c.end,A?.start),g=h.indexOf(`
`),B=g!=-1&&h.includes(`
`,g+1);return[t.sub("items",p),A?B?[O,O]:O:""]})]),O,t.sub("bracket","gt")]);if(r.items.length>=2)return k([t.sub("bracket","lt"),T([O,e.items.map((c,p,x)=>{let A=x[p+1],h=t.source.slice(c.end,A?.start),g=h.indexOf(`
`),B=g!=-1&&h.includes(`
`,g+1);return[t.sub("items",p),A?B?[O,O]:O:""]})]),O,t.sub("bracket","gt")])}let o=r.block?O:r.bracket.kind==105?F:w,a=r.commas?[",",F]:F,s=r.commas&&r.items.length>0?M(","):"";return k([t.sub("bracket","lt"),T([o,Lt(a,t.all("items").concat(r.terminator?[t("terminator")]:[])),r.terminator?"":s]),o,t.sub("bracket","gt")])}case i:return e.val;case rt:{let o=Kt(2,oe(e.of),!0);return[t("wrt"),k(o?["(",w,T(t("of")),w,")"]:[M("("," "),w,T(t("of")),w,M(")")])]}case q:return t.sub("of","value");case U:{let r=e,o=Kt(r.op.kind,oe(r.lhs),!1),a=Kt(r.op.kind,oe(r.rhs),!0);return k([o?t.paren("lhs",!0):t("lhs"),T([F,t("op")," ",a?t.paren("rhs",!0):t("rhs")])])}case Qe:return[t("name"),t.opt("without"),t.opt("type")];case Me:return[t("bang"),t("names")];case we:return[t("name"),t.opt("type")];case j:return[t("colon")," ",k([M("("),T([w,t("type")]),w,M(")")])];case Tt:return[t("name"),t.opt("targs")];case ne:return[t.opt("label"),t("of")];case et:return[t("name"),t.opt("targs"),t.opt("args")];case C:{let r=e;return Gr(r.expr),[t("expr"),r.semi!=null?t.alt("semi",";"):""]}case St:return t("token");case Bt:return t("block");case tt:{let r=e;return[t("kw"),r.label?[" ",t("label")]:"",r.value?[" ",t.paren("value")]:""]}case me:return[t.paren("on",Pn(e.on)),t("prop"),t.opt("targs"),t.opt("args")];case ee:return[t.paren("on",Pn(e.on)),t.opt("targs"),t.opt("args")];case ke:return[t.paren("on",Pn(e.on)),t("index")];case Ie:return[t("dot"),t("name")];case Pe:return[t("ident"),t.alt("colon",":")," ",t.paren("type")];case wt:return t("of");case lt:return[t("kw")," ",t("ident")," ",k([t.sub("braces","lt"),T([O,t("source")]),O,t.sub("braces","gt")])];case st:{let r=e;if(r.parts.length==1)return k([t.sub("parts",0),r.cast?F:"",t.opt("cast")]);{let o=r.block?O:F;return k([Lt(o,t.all("parts")),T([r.cast?o:"",t.opt("cast")])])}}case pe:return k([t("dcolon"),e.spaced?" ":"",t.paren("type")]);case at:{let r=e;return[t("kw"),r.lang?" ":"",t.opt("lang")," ",t.sub("braces","lt"),r.parts.map((o,a)=>a==0?t.sub("parts",a):[t.sub("interps",a-1),t.sub("parts",a)]),t.sub("braces","gt")]}case ct:return t("of");case N:return k(Ur(e,t));case ue:{let r=e;return[" ",t("kw")," ",r.block instanceof ne?M(t.as(r.block?.of,()=>k([t.sub("bracket","lt"),T([qt,Lt(qt,t.all("items"))]),qt,t.sub("bracket","gt")])),t("block")):r.block instanceof N?t.as(r.block,()=>Ur(r.block,t)):t("block")]}case Y:case de:return[t("name"),e.name.kind==116?"":" ",t("args")];case Be:return[t("name"),t("colon")," ",t.paren("expr")];case te:{let r=e,o=Kt(r.op.kind,oe(r.of),!0);return k([M("("),T([t("op"),T([w,t.paren("of",o)])]),w,M(")")])}case Q:return t("of");case Z:return k([t.sub("brack","lt"),T([w,t("value")]),w,t.sub("brack","gt")]);case fe:return[t.opt("label"),t("kw")," ",t("bound"),t("eq")," ",t("sources"),t("block")];case Ke:return[t("label"),t.alt("colon",":")," "];case xe:return[t("kw")," ",t.paren("on",ae(e.on))," ",t("arms")];case Le:return[t("pat")," ",t("arrow")," ",t.paren("expr")];case At:return t("name");case Ae:return t("name");case he:return[t("name"),e.name.kind==116?"":" ",t("of")];case Ve:return[t("key"),t.opt("pat")];case qe:return[t("colon")," ",t("pat")];case _:{let r=e,o=r.lhs&&Kt(rn,oe(r.lhs),!1),a=r.rhs&&Kt(rn,oe(r.rhs),!0);return[o==null?"":t.paren("lhs",o),t("op"),a==null?"":t.paren("rhs",a)]}case it:return[t("kw")," ",t("source"),t.alt("semi",";")];case yt:let n=e.variants;return n&&(n.block=!0),[t("kw")," ",t("name"),t.opt("tparams")," ",t("variants")];case V:throw new Error("Empty expression.");case Ce:return[t("name"),e.fields?" ":"",t.opt("fields")];case De:return[t.opt("constKw"),e.constKw?" ":"",t("name"),t("colon")," ",t.paren("type")];case dt:{let r=e.variants;return r&&(r.block=!0),[t("kw")," ",t("name"),t.opt("tparams")," ",t("arrow")," ",t("ret")," ",t("variants")]}case Re:return[t("name")," ",t("arrow")," ",t.paren("of")];case ft:{let r=e.fields;return r&&(r.block=!0),[t("kw")," ",t("name"),t.opt("tparams")," ",t("fields")]}case gt:case nt:return k([t.sub("brack","lt"),T([w,t("of"),t("semi"),F,t.as(e.sizes,()=>So(Lt([",",F],t.all("items")))),M(",")]),w,t.sub("brack","gt")]);case ht:return[t("kw")," ",t("ident"),t.opt("type"),t.opt("value"),t.alt("semi",";")];case _e:return[" ",t("eq")," ",t("value")];case ot:return[t.paren("lhs")," ",t("op")," ",t("rhs")];case kt:return[t("kw")," ",t("item")];case We:case je:return[t("kw")," ",t("name"),t.opt("targs"),t.opt("as")," ",t("label"),t.alt("semi",";")];case Xe:return[t("kw")," ",t("name"),t.opt("as"),t.opt("colon"),t.opt("type")," ",t("eq")," ",t.paren("value"),t.alt("semi",";")];case Ne:return[" ",t("as")," ",t("alias")];case xt:return[t("data"),e.local?" ":"",t.opt("local")," ",t("name"),t("colon")," ",t("type"),t.alt("semi",";")];case mt:case Et:return[t("kw")," ",t.paren("expr"),t.opt("message"),t.alt("semi",";")];case ie:return[" ",t("kw")," ",t("message")];case Oe:return t("name")}return wo.add(e.constructor.name),e.constructor.name}var{group:Vr,indent:qr,softline:an,ifBreak:_r}=go;function br(e,t){let n=e;function r(a){if(a instanceof i)return a.val;if(a instanceof u){let s=n;n=a;try{return on(a,o)}finally{n=s}}return"<invalid>"}function o(a){return r(n[a])}return o.alt=(a,s)=>{let c=n[a];return c==null&&s!==void 0?s:r(c)},o.opt=a=>{let s=n[a];return s==null?"":r(s)},o.sub=(a,s)=>r(n[a][s]),o.all=a=>{let s=[],c=n;try{let p=n[a];for(let x of p)n=x,s.push(on(x,o))}finally{n=c}return s},o.paren=(a,s)=>{let c=n[a],p=r(c);return c instanceof L||c instanceof X?p:Vr(s?["(",qr([an,p]),an,")"]:[_r("("),qr([an,p]),an,_r(")")])},o.as=(a,s)=>{let c=n;try{return n=a,s()}finally{n=c}},o.source=t,on(e,o)}var Zt=class extends i{constructor(n,r,o,a){super(n,r.kind,r.start,o.end);this.lt=r;this.gt=o;this.contents=a}};function $r(e,t){let{issues:n,ret:r}=Nr(e,t),o=[],a=[],s=a;for(let c=0;c<r.length;c++){let p=r[c];switch(p.kind){case 98:if(p.start!==r[c-1]?.end)break;p.kind=107;case 101:case 103:case 105:case 109:let x=new Zt(e,p,new i(e,Nt[p.kind],p.start,p.start),new sn(e,[],n,p.end,p.end));o.push(x),s.push(x),s=x.contents.tokens;continue;case 99:if(o[o.length-1]?.kind!=107)break;p.kind=108;case 102:case 104:case 106:if(!o.some(g=>Nt[g.kind]==p.kind)){n.raise(l.MismatchedClosingParen,p);continue}let A=o[o.length-1];for(;Nt[A.kind]!=p.kind;){o.pop();let g=A;g.gt=new i(e,Nt[A.kind],p.start,p.start,!0),g.end=p.start,g.contents.end=p.start,A=o[o.length-1],s=A.contents.tokens}let h=A;h.gt=p,h.end=p.end,h.contents.end=p.start,o.pop(),s=o[o.length-1]?.contents.tokens??a;continue}s.push(p)}for(let c of o)n.raise(l.MismatchedOpeningParen,c.lt);return new sn(e,a,n,0,e.length)}var sn=class{constructor(t,n,r,o,a){this.source=t;this.tokens=n;this.issues=r;this.start=o;this.end=a;this.index=0}next(){return this.tokens[this.index]}raiseNext(t){let n=this.next();n instanceof Zt&&(n=n.lt),this.issues.raise(t,n??this)}accept(){this.index++}loc(){return this.next()?.start??this.end}pos(){let t=this.loc();return new E(t,t)}raise(t,n){this.issues.raise(t,n)}content(t){return this.source.slice(t.start,t.end)}isEmpty(){return this.tokens.length==0}isDone(){return this.index>=this.tokens.length}requireDone(){let t=this.next();t&&this.raise(l.UnexpectedToken,t)}match(t){let n=this.next();return n&&n.kind==t?(this.accept(),n):null}matchDrop(t,n){let r=this.match(t);return r&&this.raiseNext(n),r}matchOr(t,n){let r=this.match(t);return r||this.raiseNext(n),r}matchGroup(t){let n=this.next();return n&&n instanceof Zt&&n.kind==t?(this.accept(),n):null}matchAny(t){let n=this.next();return n&&t.includes(n.kind)?(this.accept(),n):null}peek(){return this.next()?.kind??null}full(t){let n=t(this);return this.requireDone(),n}};function Ro(e){let t=e.match(1);if(!t)return null;let n=e.match(112);return new Ve(t,n&&new qe(n,ro(e)))}var zr=P(105,Ro,l.ExpectedDestructuring);function No(e){switch(e.peek()){case 6:return new Oe(e.match(6));case 1:let t=e.match(1);return e.peek()==105&&e.raiseNext(l.UseDotAsAStructNameForDestructuringInPatterns),new At(t);case 116:{let n=e.match(116),r=zr(e);return new he(n,r)}case 10:{let n=e.match(10);if(e.peek()==105){let r=zr(e);return new he(n,r)}else return new Ae(n)}case 8:case 9:case 40:case 41:return new Ae(e.matchAny([8,9,40,41]))}return e.raiseNext(l.ExpectedPat),new Oe(new i(e.source,6,e.loc(),e.loc(),!0))}function ro(e){return No(e)}function Fo(e){let t=e.match(1);if(!t)return null;let n=e.match(112),r=n&&K(e);return new we(t,n&&new j(n,r))}var Mo=P(107,Fo,null);function kn(e){let t=Mo(e);return t?new ge(t):null}var oo=On(m,l.ExpectedExpression);function Uo(e){let t=e.matchGroup(103);if(!t)return null;let n=K(t.contents),r=t.contents.matchOr(110,l.MissingSemi),o=oo(t.contents);return new gt(t,n,r,o)}function K(e){switch(e.peek()){case 1:return new Tt(e.match(1),Ht(e));case 8:case 9:case 10:case 40:case 41:return new St(e.matchAny([8,9,10,40,41]));case 105:return new Bt(ce(e,null));case 101:let t=e.matchGroup(101);return new wt(t,t.contents.full(K));case 103:return Uo(e)}return e.raiseNext(l.ExpectedType),new tn(e.loc())}var Ht=P(107,K,null);function vo(e,t){let n=e.match(10)||e.matchAny([9,8,41,40]);if(!n)return null;if(n.kind==10&&t.struct&&e.peek()==105){let r=Pr(e);if(r)return new de(n,r)}return new Ye(n)}function Go(e){let t=e.match(7);if(!t)return null;let n=La(e),r=e.match(115),o=r&&K(e);return(e.peek()==107||e.peek()==101)&&e.raiseNext(l.VarParamFollowedByArguments),new Qe(t,n,r&&new pe(r,o,!1))}function Vo(e,t){let n=e.match(1)||e.match(4);if(!n)return null;let r=t.struct&&Pr(e);return r?new Y(n,r):(e.peek()==100&&e.raiseNext(l.NonParamFollowedByConstMarker),e.peek()==115&&e.raiseNext(l.NonParamFollowedByTypeAssertion),new et(n,Ht(e),cn(e)))}function Lr(e){let t=e.match(14);if(!t)return null;let n=m(e,{struct:!1}),r=ce(e,null),o=e.match(15);return o?e.peek()==14?new N(t,n,r,new ue(o,Lr(e))):e.peek()==105?new N(t,n,r,new ue(o,ce(e,null))):(e.raiseNext(l.IfOrBlockMustFollowElse),new N(t,n,r,null)):new N(t,n,r,null)}var qo=On(e=>e.match(1),l.ExpectedForBindings),_o=On(e=>e.peek()==105?null:m(e,{struct:!1}),l.ExpectedForSources);function Ir(e,t){let n=e.match(16);return n?new fe(t,n,qo(e),e.matchOr(25,l.ExpectedIn),_o(e),ce(e,null)):null}function ao(e){let t=e.match(5);if(!t)return null;let n=e.matchOr(112,l.ExpectedColon),r=new Ke(t,n);switch(e.peek()){case 16:return[Ir(e,r),!1];case 105:return[ce(e,r),!1]}return e.raise(l.InvalidLabel,new E(t.start,(n??t).end)),[m(e),!0]}function bo(e,t){let n=e.matchAny([27,28,29]);if(!n)return null;let r=e.match(5),o=m(e,{struct:t.struct,noErrorOnEmpty:!0});return o instanceof V&&(o=null),n.kind==27?r&&e.raise(l.InvalidLabeledExit,r):n.kind==29&&o&&e.raise(l.InvalidValuedExit,o),new tt(n,r,o)}function $o(e){return new Le(ro(e),e.matchOr(114,l.ExpectedMatchArrow),m(e))}var zo=P(105,$o,l.ExpectedMatchArms);function so(e){let t=e.match(17);return t?new xe(t,m(e,{struct:!1}),zo(e)):null}function Wo(e,t){switch(e.peek()){case 116:return new Y(e.match(116),Pr(e));case 9:case 8:case 10:case 40:case 41:return vo(e,t);case 7:return Go(e);case 1:case 4:return Vo(e,t);case 101:{let n=e.matchGroup(101);return new q(new Z(n,n.contents.full(m)))}case 103:{let n=e.matchGroup(103),r=m(n.contents);switch(n.contents.peek()){case 110:let o=n.contents.match(110),a=oo(n.contents);return new nt(n,r,o,a);case 111:let s=[r];for(;n.contents.match(111)&&!n.contents.isDone();)s.push(m(n.contents));return new Q(new L(n,s,null,!0,!1));case null:return new Q(new L(n,[r],null,!0,!1))}return n.contents.raiseNext(l.ExpectedCommaOrSemi),new Q(new L(n,[r],null,!0,!1))}case 105:return ce(e,null);case 14:return Lr(e);case 16:return Ir(e,null);case 34:return lo(e,!1);case 27:case 28:case 29:return bo(e,t);case 17:return so(e);case 5:return ao(e)[0]}return t.noErrorOnEmpty||e.raise(l.ExpectedExpression,e.pos()),new V(e.loc())}function jo(e){let t=e.match(116);if(!t)return null;let n=e.matchOr(1,l.ExpectedIdent);return new Ie(t,n)}function Xo(e,t){let n=Wo(e,t);e:for(;;){switch(e.peek()){case 107:let r=Ht(e),o=cn(e);n=new ee(n,r,o);continue;case 101:let a=cn(e);if(a){n=new ee(n,null,a);continue}else break e;case 103:let s=e.matchGroup(103);n=new ke(n,new Z(s,s.contents.full(m)));continue;case 116:n=new me(n,jo(e),Ht(e),cn(e));continue}break}return n}function Zo(e,t){let n=[],r;for(;r=e.matchAny([82,43,87,48,100,61])||e.matchAny([2,3]);)n.push(r);let o=Xo(e,t);for(;n[0];){let a=n.pop();a.kind==2||a.kind==3?o=new rt(a,o):(a.kind==82?a.kind=83:a.kind==43&&(a.kind=44),o=new te(a,o))}return o}function Wr(e,t){return(n,r)=>{let o=t(n,r),a=n.matchAny(e);if(a){let s=t(n,r);return new U(o,a,s)}else return o}}function Se(e,t){return(n,r)=>{let o=t(n,r),a;for(;a=n.matchAny(e);)o=new U(o,a,t(n,r));return o}}function Ho(e){return(t,n)=>{let r=e(t,n),o;for(;o=t.match(113);)r=new ot(r,o,K(t));return r}}function Jo(e){return(t,n)=>{if(t.peek()==117){let s=t.match(117),c=e(t,{struct:n.struct,noErrorOnEmpty:!0});return c instanceof V?new _(null,s,null):new _(null,s,c)}let r=e(t,n),o=t.match(117);if(!o)return r;let a=e(t,{struct:n.struct,noErrorOnEmpty:!0});return a instanceof V?new _(r,o,null):new _(r,o,a)}}function jr(e,t){return(n,r)=>{let o=t(n,r),a,s=[];for(;a=n.matchAny(e);)s.push({lhs:o,op:a}),o=t(n,r);for(;s.length;){let{lhs:c,op:p}=s.pop();o=new U(c,p,o)}return o}}var Yo=jr([119,80],Se([92,53],Se([90,51],Se([91,52],Wr([94,95,98,99,96,97,55,56,59,60,57,58],Ho(Se([88,49],Se([89,50],Se([81,82,42,43],Se([84,85,118,45,46,79],jr([86,47],Jo(Wr([93,54],Zo)))))))))))));function Qo(e){let t=e.match(37);if(!t)return null;let n=m(e),r=e.match(15);return new Et(t,n,r&&new ie(r,e.matchOr(11,l.ExpectedAssertFailureReason)),e.matchOr(110,l.MissingSemi))}function ea(e){let t=e.match(24);if(!t)return null;let n=e.matchOr(1,l.ExpectedIdent),r=e.match(112),o=r&&K(e),a=e.match(119),s=a&&m(e),c=e.matchOr(110,l.MissingSemi);return new ht(t,n,r&&new j(r,o),a&&new _e(a,s),c)}function ta(e){if(e.isDone())return null;switch(e.peek()){case 24:return ea(e);case 14:return new C(Lr(e),e.match(110),!1);case 16:return new C(Ir(e,null),e.match(110),!1);case 17:return new C(so(e),e.match(110),!1);case 105:return new C(ce(e,null),e.match(110),!1);case 5:{let[r,o]=ao(e),a=e.match(110);return new C(r,a,o&&!a)}case 37:return Qo(e);default:let t=m(e),n=e.match(110);return new C(t,n,!n)}}function m(e,t={struct:!0}){return Yo(e,t)}function On(e,t){return n=>{let r=new X([],n.start,n.start),o=e(n);if(o){r.items.push(o);let a;for(;(a=n.match(111))&&!n.isDone();){let s=e(n);if(s)r.items.push(s),r.end=s.end;else{r.end=a.end;break}}}else n.raiseNext(t);return r}}function P(e,t,n,r){return o=>{let a=o.matchGroup(e);if(!a)return n!=null&&o.raiseNext(n),null;let s=new L(a,[],null,!0,!1);if(!a.contents.isEmpty()){let c=t(a.contents);if(!c){let p=r?.(a.contents);return p!=null&&(s.terminator=p,s.end=p.end),a.contents.requireDone(),s}for(s.items.push(c);a.contents.match(111)&&!a.contents.isDone();){let p=t(a.contents);if(!p){let x=r?.(a.contents);return x!=null&&(s.terminator=x,s.end=x.end),a.contents.requireDone(),s}s.items.push(p)}a.contents.requireDone()}return s}}function na(e){let t=e.match(1);if(!t)return null;let n=e.match(112),r=n&&m(e);return new Be(t,n,r)}var cn=P(101,m,null),Pr=P(105,na,null);function ce(e,t,n=!1){let r=e.matchGroup(105);if(!r)return e.raiseNext(l.ExpectedBlock),null;let o=[],a;for(;(a=ta(r.contents))&&(o.push(a),!(a instanceof C&&a.terminatesBlock)););return r.contents.requireDone(),new ne(t,new L(r,o,null,!1,n))}function co(e,t){return n=>{let r=n.matchGroup(105);if(!r)return t!=null&&n.raiseNext(t),null;let o=[],a,s=r.contents.index;for(;(a=e(r.contents))&&!(s==r.contents.index||(s=r.contents.index,o.push(a),r.contents.isDone())););return r.contents.requireDone(),new L(r,o,null,!1,!0)}}function ra(e){let t=e.match(34);if(!t)return null;let n=e.match(1),r=e.matchGroup(105),o=[],a=[];e:if(r){let s=r.contents.match(13);if(s)o.push(s);else break e;let c;for(;c=r.contents.matchGroup(109);){a.push(new ct(new Z(c,c.contents.full(m))));let p=r.contents.match(13);if(p)o.push(p);else break e}r.contents.requireDone()}return new at(t,n,r,o,a)}function lo(e,t){let n=[],r;for(;r=ra(e);)n.push(r);if(!n.length)return null;let o=e.match(115),a=o&&K(e);return new st(n[0].start,(a??o??n[n.length-1]).end,n,o&&new pe(o,a,!0),t)}function oa(e){let t=e.match(20);if(!t)return null;let n=e.match(1),r=e.matchGroup(105),o=r&&r.contents.full(a=>lo(a,!0));return new lt(t,n,r,o)}function aa(e){let t=e.match(1);if(!t)return null;let n=e.matchOr(112,l.ExpectedColon);return new Pe(t,n,K(e))}var sa=P(101,aa,l.ExpectedFnParams);function ca(e){let t=e.match(21);if(!t)return null;let n=An(e);n||e.raiseNext(l.ExpectedFnName);let r=kn(e),o=sa(e),a=e.match(113),s=null;a&&e.peek()==105?e.raiseNext(l.ExpectedType):a&&(s=K(e));let c=a&&new ve(a,s),p=e.match(31);return new pt(t,n,r,o,c,p&&new Ge(p,la(e)),ce(e,null,!0))}var la=On(e=>m(e,{struct:!1}),l.ExpectedUsageExamples);function po(e){let t=m(e),n=e.match(114);n||e.raiseNext(l.MissingRuleArrow);let r=m(e),o=e.match(110);return o||e.raiseNext(l.MissingSemi),new Ue(t,n,r,o)}var pa=co(po,null);function ua(e){let t=e.match(18);if(!t)return null;let n=kn(e);return new ut(t,n,e.peek()==105?pa(e):po(e))}function ia(e){let t=e.match(30);return t?new it(t,e.matchOr(11,l.ExpectedImportPath),e.matchOr(110,l.MissingSemi)):null}function uo(e){let t=e.match(39),n=e.match(1);return n?new De(t,n,e.matchOr(112,l.ExpectedColon),K(e)):null}var ya=P(105,uo,l.ExpectedStructFields);function io(e){return e.match(117)}var da=P(105,uo,null);function fa(e){let t=e.match(10);return t?new Ce(t,da(e)):null}var xa=P(105,fa,l.ExpectedEnumVariants,io);function ma(e){let t=e.match(10);return t?new Re(t,e.matchOr(114,l.ExpectedEnumVariantValue),m(e)):null}var ka=P(105,ma,l.ExpectedEnumVariants,io);function Oa(e){let t=e.match(26);if(!t)return null;let n=e.matchOr(1,l.ExpectedIdent),r=kn(e),o=e.match(113);return o?new dt(t,n,r,o,K(e),ka(e)):new yt(t,n,r,xa(e))}function Aa(e){let t=e.match(22);if(!t)return null;let n=e.matchOr(1,l.ExpectedIdent),r=kn(e);return new ft(t,n,r,ya(e))}function ha(e){let t=e.match(35);return t?new xt(t,e.match(0),e.matchOr(1,l.ExpectedIdent),e.matchOr(112,l.ExpectedColon),K(e),e.matchOr(110,l.MissingSemi)):null}function Ea(e){let t=e.match(37);if(!t)return null;let n=m(e),r=e.match(15);return new mt(t,n,r&&new ie(r,e.matchOr(11,l.ExpectedAssertFailureReason)),e.matchOr(110,l.MissingSemi))}function An(e){return e.match(1)||e.matchAny(Rr)}var Ta=P(105,An,null);function Xr(e){let t=e.match(32);if(!t)return null;let n=e.peek()==105?Ta(e):An(e);return new Ne(t,n)}function yo(e){let t=e.match(21)||e.match(20)||e.match(24);if(!t)return e.raiseNext(l.InvalidExposeKind),null;if(t.kind==24){let c=e.match(1);c||e.raiseNext(l.ExpectedIdent);let p=Xr(e),x=e.matchOr(11,l.ExpectedExposeString),A=e.match(112),h=A&&K(e),g=e.match(119),B=m(e),Ct=e.matchOr(110,l.MissingSemi);return new Xe(t,c,p,x,A&&new j(A,h),g,B,Ct)}let n=An(e);n||e.raiseNext(l.ExpectedFnName),t.kind==21&&e.peek()==107&&e.raiseNext(l.NoGenericsOnExposedFn);let r=Ht(e),o=Xr(e),a=e.matchOr(11,l.ExpectedExposeString),s=e.matchOr(110,l.MissingSemi);return t.kind==20?new je(t,n,r,o,a,s):new We(t,n,a,o,s)}var Sa=co(yo,null);function wa(e){let t=e.match(19);return t?new kt(t,e.peek()==105?Sa(e):yo(e)):null}function ga(e){switch(e.peek()){case 20:return oa(e);case 21:return ca(e);case 18:return ua(e);case 30:return ia(e);case 26:return Oa(e);case 22:return Aa(e);case 19:return wa(e);case 35:return ha(e);case 37:return Ea(e)}return null}function Ba(e){let t=[],n;for(;n=ga(e);)t.push(n);return e.requireDone(),new Fe(t,e.start,e.end)}var Ka=P(103,e=>e.match(1),l.ExpectedConstWrtList);function La(e){let t=e.match(100);return t?new Me(t,e.match(1)??Ka(e)):null}function fo(e){return Ba(e)}var rc=[{name:"NyaLangScript",parsers:["nya-parse"],extensions:[".nya"],vscodeLanguageIds:["nya"]}],oc={"nya-parse":{parse(e){let t=$r(e,{comments:!1}),n=fo(t);return Object.assign(n,{source:e}),n},astFormat:"nya-ast",locStart(e){return e.start},locEnd(e){return e.end}}},ac={"nya-ast":{print(e){return br(e.node,e.root.source)}}};export{rc as languages,oc as parsers,ac as printers};
